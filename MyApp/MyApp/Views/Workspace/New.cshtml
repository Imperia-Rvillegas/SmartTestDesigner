@{
    ViewData["Title"] = "Nuevo";
}

<div class="space-y-10">
    <section class="overflow-hidden rounded-3xl border border-indigo-500/20 bg-gradient-to-br from-indigo-900/70 via-gray-950 to-gray-950 p-10 shadow-xl">
        <div class="flex flex-col gap-8 lg:flex-row lg:items-center">
            <div class="flex-1 space-y-6">
                <p class="text-sm font-semibold uppercase tracking-widest text-indigo-300">Nuevo escenario</p>
                <h1 class="text-4xl font-semibold text-white sm:text-5xl">Convierte tus pasos manuales en un flujo automatizable</h1>
                <p class="text-base text-gray-300">Selecciona c√≥mo quieres iniciar. Puedes pegar pasos en espa√±ol, importar un archivo estructurado o pedir ayuda a la IA para que genere el Gherkin. Cada opci√≥n conecta con el grabador y los proyectos Maven.</p>
                <div class="flex flex-wrap gap-3">
                    <a asp-controller="Workspace" asp-action="New" asp-fragment="crear-desde-pasos" class="inline-flex items-center gap-2 rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-semibold text-white shadow-lg shadow-indigo-500/30 transition hover:bg-indigo-400">
                        ‚ûï Crear escenario desde pasos
                    </a>
                    <a asp-controller="Workspace" asp-action="New" asp-fragment="importar-pasos" class="inline-flex items-center gap-2 rounded-full border border-indigo-400/40 bg-indigo-500/10 px-5 py-2.5 text-sm font-semibold text-indigo-200 transition hover:border-indigo-300 hover:bg-indigo-500/20 hover:text-white">
                        üì• Importar pasos
                    </a>
                    <a asp-controller="Workspace" asp-action="New" asp-fragment="generar-gherkin-ia" class="inline-flex items-center gap-2 rounded-full border border-cyan-400/40 bg-cyan-500/10 px-5 py-2.5 text-sm font-semibold text-cyan-200 transition hover:border-cyan-300 hover:bg-cyan-500/20 hover:text-white">
                        üß† Generar Gherkin con IA
                    </a>
                </div>
            </div>
            <div class="w-full max-w-md space-y-4 rounded-2xl border border-white/10 bg-gray-950/70 p-6">
                <h2 class="text-sm font-semibold text-indigo-200">Checklist de calidad</h2>
                <ul class="space-y-3 text-sm text-gray-300">
                    <li class="flex gap-3">
                        <span class="mt-0.5 inline-flex size-6 items-center justify-center rounded-full bg-indigo-500/20 text-indigo-300">1</span>
                        Identifica Given/When/Then para cada paso manual.
                    </li>
                    <li class="flex gap-3">
                        <span class="mt-0.5 inline-flex size-6 items-center justify-center rounded-full bg-indigo-500/20 text-indigo-300">2</span>
                        Define datos de prueba y precondiciones en Notas.
                    </li>
                    <li class="flex gap-3">
                        <span class="mt-0.5 inline-flex size-6 items-center justify-center rounded-full bg-indigo-500/20 text-indigo-300">3</span>
                        Marca tags @@smoke, @@regression y entornos antes de generar StepDefs.
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <section class="grid gap-6 lg:grid-cols-[minmax(0,1.3fr)_minmax(0,1fr)]">
        <article id="crear-desde-pasos" class="rounded-2xl border border-white/10 bg-gray-900/50 p-6">
            <header class="flex items-center justify-between">
                <div>
                    <h2 class="text-lg font-semibold text-white">Crear escenario desde pasos</h2>
                    <p class="text-sm text-gray-400">Pega los pasos manuales tal como los documenta QA o negocio.</p>
                </div>
                <button class="rounded-full bg-indigo-500/10 px-4 py-2 text-sm font-semibold text-indigo-300 hover:bg-indigo-500/20 hover:text-white">Validar pasos</button>
            </header>
            <div class="mt-4 grid gap-6 lg:grid-cols-2">
                <div class="space-y-3">
                    <label for="manual-steps" class="text-sm font-medium text-gray-200">Pega tus pasos (espa√±ol)</label>
                    <textarea id="manual-steps" rows="10" class="w-full rounded-xl border border-white/10 bg-gray-950/80 p-4 text-sm text-gray-100 placeholder:text-gray-500 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/40" placeholder="1. El usuario accede a Imperia..."></textarea>
                    <p class="text-xs text-gray-500">Detectamos pasos ambiguos, repetidos o faltantes antes de ir al Gherkin.</p>
                </div>
                <div class="flex flex-col gap-3">
                    <div class="rounded-xl border border-white/10 bg-gray-950/70 p-4">
                        <p class="text-xs font-semibold uppercase tracking-wide text-gray-500">Sugerencia Given/When/Then</p>
                        <ul class="mt-2 space-y-2 text-sm text-gray-300">
                            <li><span class="font-semibold text-indigo-300">Given</span> Base de datos limpia y usuario QA creado.</li>
                            <li><span class="font-semibold text-indigo-300">When</span> El usuario ejecuta la b√∫squeda de pedidos.</li>
                            <li><span class="font-semibold text-indigo-300">Then</span> Se muestran resultados con totales actualizados.</li>
                        </ul>
                    </div>
                    <div class="rounded-xl border border-white/10 bg-gray-950/70 p-4">
                        <p class="text-xs font-semibold uppercase tracking-wide text-gray-500">Pr√≥ximos pasos</p>
                        <ol class="mt-2 space-y-1 text-sm text-gray-300">
                            <li>1. Generar Gherkin</li>
                            <li>2. Guardar borrador</li>
                            <li>3. Continuar a Grabador</li>
                        </ol>
                    </div>
                </div>
            </div>
            <div class="mt-6 flex flex-wrap gap-3">
                <button class="rounded-full bg-indigo-500 px-5 py-2 text-sm font-semibold text-white hover:bg-indigo-400">Generar Gherkin</button>
                <button class="rounded-full border border-white/10 bg-gray-900/60 px-5 py-2 text-sm font-semibold text-gray-200 hover:border-indigo-400 hover:text-white">Guardar borrador</button>
                <a asp-controller="Workspace" asp-action="Recorder" class="rounded-full border border-cyan-400/40 bg-cyan-500/10 px-5 py-2 text-sm font-semibold text-cyan-200 hover:border-cyan-300 hover:bg-cyan-500/20 hover:text-white">Continuar a Grabador</a>
            </div>
        </article>
        <article id="importar-pasos" class="rounded-2xl border border-white/10 bg-gray-900/50 p-6">
            <header class="flex items-center justify-between">
                <div>
                    <h2 class="text-lg font-semibold text-white">Importar pasos (CSV/Markdown)</h2>
                    <p class="text-sm text-gray-400">Mapea columnas para traducirlas a Given/When/Then autom√°ticamente.</p>
                </div>
                <button class="rounded-full bg-indigo-500/10 px-4 py-2 text-sm font-semibold text-indigo-300 hover:bg-indigo-500/20 hover:text-white">Subir archivo</button>
            </header>
            <div class="mt-4 space-y-4 text-sm text-gray-300">
                <div class="grid gap-4 lg:grid-cols-3">
                    <div class="rounded-xl border border-white/10 bg-gray-950/70 p-4">
                        <p class="text-xs uppercase tracking-wide text-gray-500">CSV</p>
                        <p class="mt-1 text-gray-200">Separador configurable, soporte para ; o ,.</p>
                    </div>
                    <div class="rounded-xl border border-white/10 bg-gray-950/70 p-4">
                        <p class="text-xs uppercase tracking-wide text-gray-500">Markdown</p>
                        <p class="mt-1 text-gray-200">Listas numeradas y tablas se reconocen como pasos y datos.</p>
                    </div>
                    <div class="rounded-xl border border-white/10 bg-gray-950/70 p-4">
                        <p class="text-xs uppercase tracking-wide text-gray-500">Asistente</p>
                        <p class="mt-1 text-gray-200">Configura columnas de Acci√≥n, Dato y Resultado esperado.</p>
                    </div>
                </div>
                <div class="overflow-hidden rounded-2xl border border-white/5">
                    <table class="min-w-full divide-y divide-white/10 text-left text-sm">
                        <thead class="bg-white/5 text-gray-400">
                            <tr>
                                <th scope="col" class="px-4 py-2 font-medium">Acci√≥n</th>
                                <th scope="col" class="px-4 py-2 font-medium">Dato</th>
                                <th scope="col" class="px-4 py-2 font-medium">Resultado</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-white/5 text-gray-200">
                            <tr>
                                <td class="px-4 py-2">Ingresar usuario</td>
                                <td class="px-4 py-2">qa_user@imperia.com</td>
                                <td class="px-4 py-2">Se habilita el campo contrase√±a</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2">Seleccionar almac√©n</td>
                                <td class="px-4 py-2">QA-01</td>
                                <td class="px-4 py-2">Se muestran pedidos en cola</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="flex flex-wrap gap-3">
                    <button class="rounded-full bg-indigo-500 px-5 py-2 text-sm font-semibold text-white hover:bg-indigo-400">Previsualizar</button>
                    <button class="rounded-full border border-white/10 bg-gray-900/60 px-5 py-2 text-sm font-semibold text-gray-200 hover:border-indigo-400 hover:text-white">Generar Gherkin</button>
                </div>
            </div>
        </article>
    </section>

    <section id="generar-gherkin-ia" class="rounded-2xl border border-white/10 bg-gray-900/50 p-6">
        <header class="flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between">
            <div>
                <h2 class="text-lg font-semibold text-white">Generar Gherkin con IA</h2>
                <p class="text-sm text-gray-400">Configura par√°metros para obtener escenarios consistentes con tu estilo.</p>
            </div>
            <div class="flex flex-wrap items-center gap-3 text-sm text-gray-300">
                <label class="flex items-center gap-2 rounded-full border border-white/10 bg-gray-950/70 px-3 py-1">Temperatura
                    <input type="range" min="0" max="1" step="0.1" value="0.3" class="w-28 accent-indigo-500" />
                </label>
                <label class="flex items-center gap-2 rounded-full border border-white/10 bg-gray-950/70 px-3 py-1">Estilo
                    <select class="rounded-lg border border-white/10 bg-gray-950/80 px-2 py-1 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/40">
                        <option>Formal</option>
                        <option>Conversacional</option>
                        <option>Conciso</option>
                    </select>
                </label>
                <label class="flex items-center gap-2 rounded-full border border-white/10 bg-gray-950/70 px-3 py-1">Idioma
                    <select class="rounded-lg border border-white/10 bg-gray-950/80 px-2 py-1 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/40">
                        <option>Espa√±ol</option>
                        <option>Ingl√©s</option>
                    </select>
                </label>
            </div>
        </header>
        <div class="mt-4 grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(0,0.8fr)]">
            <div class="space-y-3">
                <label for="prompt" class="text-sm font-medium text-gray-200">Describe qu√© debe automatizar la IA</label>
                <textarea id="prompt" rows="8" class="w-full rounded-xl border border-white/10 bg-gray-950/80 p-4 text-sm text-gray-100 placeholder:text-gray-500 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/40" placeholder="Escenario de login con validaciones de captcha..."></textarea>
                <button class="rounded-full bg-indigo-500 px-5 py-2 text-sm font-semibold text-white hover:bg-indigo-400">Generar con IA</button>
            </div>
            <div class="rounded-2xl border border-white/10 bg-gray-950/70 p-4">
                <p class="text-xs uppercase tracking-wide text-gray-500">Previsualizaci√≥n</p>
                <pre class="mt-2 max-h-72 overflow-y-auto rounded-xl border border-white/5 bg-gray-950/90 p-4 text-xs text-gray-200">Feature: Autenticaci√≥n Imperia
    @@smoke @@stage
    Scenario: Validar login exitoso
        Given que el usuario visita la pantalla de acceso
        When introduce credenciales v√°lidas
        Then visualiza el dashboard principal con widgets

    Scenario: Mostrar error por credenciales inv√°lidas
        Given que el usuario est√° en la pantalla de acceso
        When ingresa un usuario incorrecto
        Then se muestra un mensaje de error accesible</pre>
            </div>
        </div>
        <div class="mt-6 flex flex-wrap gap-3 text-sm text-gray-300">
            <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-gray-950/60 px-4 py-2">Tiempo estimado: <strong class="font-semibold text-white">15s</strong></span>
            <span class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-gray-950/60 px-4 py-2">Coste aproximado: <strong class="font-semibold text-white">$0.001</strong></span>
            <a asp-controller="Workspace" asp-action="Scenarios" class="inline-flex items-center gap-2 rounded-full border border-emerald-400/40 bg-emerald-500/10 px-4 py-2 font-semibold text-emerald-200 hover:border-emerald-300 hover:bg-emerald-500/20 hover:text-white">Abrir en editor Gherkin</a>
        </div>
    </section>
</div>
